# ============================================================================
# SonarCloud Configuration
# ============================================================================
# Proyecto: Sistema de Predicción de Pagos ML
# Autor: Alexis Jacquet
# HENRY M5 - Avance 3 Extra Credit
# ============================================================================

# Información del Proyecto
sonar.projectKey=JacquetAlexis23_ProyectoM5_JacquetAlexis
sonar.organization=jacquetalexis23

# Metadata
sonar.projectName=ML Payment Prediction API
sonar.projectVersion=3.0.0

# Rutas del código fuente
# Solo se incluyen los archivos con cobertura de tests.
# app_streamlit.py, run_pipeline.py y model_monitoring.py son scripts de entrada/UI
# no testeables con unit tests y se excluyen del análisis estático.
sonar.sources=api_main.py,mlops_pipeline/src/ft_engineering.py,mlops_pipeline/src/model_deploy.py,mlops_pipeline/src/model_training_evaluation.py
sonar.tests=tests

# Exclusiones
sonar.exclusions=\
    **/__pycache__/**,\
    **/*.pyc,\
    .venv/**,\
    venv/**,\
    env/**,\
    .env/**,\
    build/**,\
    dist/**,\
    *.egg-info/**,\
    .git/**,\
    data/**,\
    results/**,\
    models/**,\
    .ipynb_checkpoints/**,\
    **/*.ipynb,\
    **/*.bat,\
    **/*.md,\
    Dockerfile,\
    docker-compose.yml,\
    .dockerignore,\
    .gitignore

# Exclusiones de cobertura
sonar.coverage.exclusions=\
    **/*_test.py,\
    **/test_*.py,\
    tests/**,\
    **/__init__.py,\
    **/setup.py,\
    app_streamlit.py,\
    run_pipeline.py,\
    mlops_pipeline/src/model_monitoring.py

# Exclusiones de duplicación
sonar.cpd.exclusions=\
    tests/**,\
    **/*_test.py

# Configuración de Python
sonar.python.version=3.11

# Cobertura de código (pytest-cov)
sonar.python.coverage.reportPaths=coverage.xml

# Reportes de linters
sonar.python.pylint.reportPaths=pylint-report.txt
sonar.python.flake8.reportPaths=flake8-report.txt

# Configuración de análisis
sonar.sourceEncoding=UTF-8

# Nota: sonar.branch.longLivedBranchesRegex se configura en la UI de SonarCloud
# (Administration > Branches and Pull Requests), no desde este archivo.
# En el plan gratuito, el Quality Gate solo aplica a la rama principal y PRs.
# Para evitar que el CI falle en ramas secundarias, se desactiva el wait.
sonar.qualitygate.wait=false

# Configuración de issues
sonar.issue.ignore.multicriteria=e1,e2,e3

# Ignorar warnings específicos de librerías ML
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.py

# Ignorar complejidad en modelos ML
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S3776
sonar.issue.ignore.multicriteria.e2.resourceKey=mlops_pipeline/src/model_training_evaluation.py

# Ignorar prints en scripts de análisis
sonar.issue.ignore.multicriteria.e3.ruleKey=python:PrintStatementUsed
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*.py

# Configuración adicional
sonar.verbose=false
